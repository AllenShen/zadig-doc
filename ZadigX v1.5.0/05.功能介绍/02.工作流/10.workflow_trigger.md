---
title: 工作流触发器
date: 2023-06-01 19:04:08
permalink: /ZadigX v1.5.0/project/workflow-trigger/
---

## 简介

本文主要介绍自定义工作流的触发器功能，包括：
- Git 触发器：代码变更后自动触发工作流
- Jira 触发器：Jira Issue 变更后自动触发工作流
- 飞书触发器：飞书工作项状态变更后自动触发工作流
- 定时器：定时触发工作流
- 通用触发器：任意第三方系统通过 Webhook 触发工作流

## Git 触发器
> 为工作流配置 Webhook 触发器，当满足触发条件的事件发生时会自动触发工作流执行，暂不支持通过 SSH 协议或 AccessToken 方式接入的代码源。

点击右侧的 `触发器` -> 选择 `Git 触发器`即可配置，实现代码变更自动触发工作流。

![common_workflow_config](../_images/common_workflow_config_webhook.png)
![common_workflow_config](../_images/common_workflow_config_webhook_0.png)
![common_workflow_config](../_images/common_workflow_config_webhook_1.png)

参数说明：
- `工作流执行变量`：希望被 Webhook 触发执行的任务，以及任务中的具体配置
- 其他参数：请参考 [触发器基本配置](/ZadigX%20v1.5.0/project/workflow/#gui-方式) 中的描述

## JIRA 触发器 
点击右侧的 `触发器` -> 选择 `JIRA 触发器` 即可配置实现 JIRA 状态变更自动触发工作流。

![jira_trigger](../_images/jira_trigger_01.png)
![jira_trigger](../_images/jira_trigger_02.png)

参数说明：
- `工作流执行变量`：希望被 Webhook 触发执行的任务，以及任务中的具体配置
- 其他参数：请参考 [触发器基本配置](/ZadigX%20v1.5.0/project/workflow/#gui-方式) 中的描述

在 JIRA 中完成 Webhook 配置

在右上角点击 `设置` 图标，点击 `System`

![jira_webhook](../_images/jira_webhook_01.png)

在左侧 `ADVANCED` 下找到 `Webhook`

![jira_webhook](../_images/jira_webhook_02.png)

点击 `+ Create a Webhook`

![jira_webhook](../_images/jira_webhook_03.png)

复制触发器的 Webhook 地址，将其填入 URL 输入框内

![jira_webhook](../_images/jira_webhook_04.png)

触发器执行成功后，将会添加 Comment 到对应的 Issue

![jira_webhook](../_images/jira_webhook_05.png)

::: tip 提示
配置 Webhook 的时不能同时配置 Issue updated 事件
:::

## 飞书触发器 
点击右侧的 `触发器` -> 选择 `飞书触发器` 即可配置实现 飞书 状态变更自动触发工作流。

![jira_trigger](../_images/feishu_trigger_01.png)
![jira_trigger](../_images/feishu_trigger_02.png)

参数说明：
- `工作流执行变量`：希望被 Webhook 触发执行的任务，以及任务中的具体配置
- 其他参数：请参考 [触发器基本配置](/ZadigX%20v1.5.0/project/workflow/#gui-方式) 中的描述

在飞书项目中完成 Webhook 配置

点击 `空间配置` -> `自动化` -> `新建规则`，进入规则创建。

![feishu_webhook](../_images/feishu_webhook_01.png)

根据需要选择规则，并在操作中将 `操作类型`，设为 Webhook 并复制触发器的 Webhook 地址，将其填入 URL 输入框内。

![feishu_webhook](../_images/feishu_webhook_02.png)

触发器执行成功后，将会添加 Comment 到对应的 Issue。

![jira_webhook](../_images/feishu_webhook_03.png)

## 定时器
点击右侧的 `触发器` -> 选择 `定时器`。

![common_workflow_config](../_images/common_workflow_config_webhook.png)
![common_workflow_config](../_images/common_workflow_config_timer.png)

触发方式以及时间配置可参考 [定时器配置](/ZadigX%20v1.5.0/project/workflow/#定时器)，在工作流执行变量中可设置定时运行的任务以及任务中的变量配置。

![common_workflow_config](../_images/common_workflow_config_timer_1.png)

## 通用触发器
点击右侧的 `触发器` -> 选择 `通用触发器` 即可配置实现第三方 Webhook 触发工作流。

![general_trigger](../_images/feishu_trigger_01.png)
![general_trigger](../_images/general_trigger_02.png)

参数说明：
- `工作流执行变量`：希望被 Webhook 触发执行的任务，以及任务中的具体配置
- 其他参数：请参考 [触发器基本配置](/ZadigX%20v1.5.0/project/workflow/#gui-方式) 中的描述在第三方系统中完成 Webhook 配置。

复制 Webhook Url，在第三方系统中完成添加。

![general_webhook](../_images/general_webhook_01.png)
